<html>
 <head>
  <script src="prototype.js"></script>
  <script type="application/x-javascript">
  //starting from https://developer.mozilla.org/en/drawing_graphics_with_canvas
var dude = {
  coords: {
    x:100,
    y:100 
  },
  width:55
}
var delta = 10;
var screen_size = {x:300,y:300}

var map = {
  screen_coords: {
  x:0,
  y:0
  },
  width: 1000
}


function context(){
 var canvas = document.getElementById("canvas");
 return canvas.getContext("2d");

}

function init(){

}

function clear(ctx){
  var ctx = context();
  ctx.clearRect(0,0,screen_size.x,screen_size.y);
}

function draw(){
  var ctx = context();
  clear(ctx);
  
  draw_bg(ctx)
  draw_dude(ctx)
}

function draw_bg(ctx,coords) {
 coords = coords||{x:1,y:1};
 ctx.fillStyle = "rgb(200,0,0)";
 ctx.fillRect (10-map.screen_coords.x, 10, 55, 50);
 ctx.fillRect (100-map.screen_coords.x, 10, 55, 50);
}

function draw_dude(ctx,coords){
 ctx.fillStyle = "rgba(0, 0, 200, 0.5)";
 ctx.fillRect (dude.coords.x-map.screen_coords.x, dude.coords.y, 55, 50);
}

Event.observe(window,'keypress',function(e){
  
  switch(e.keyCode){
  case Event.KEY_UP:
    $('debug_input').update("up");
    break;
  case Event.KEY_DOWN:
    $('debug_input').update("down");
    break;
  case Event.KEY_LEFT:
    $('debug_input').update("left");
    if (dude.coords.x-delta + dude.width >= 0) dude.coords.x-=delta;
    break;
  case Event.KEY_RIGHT:
    $('debug_input').update("right");
    
    if (dude.coords.x+delta - dude.width < map.width) dude.coords.x+=delta;
    
    break;
  }
  if (dude.coords.x > map.screen_coords.x + screen_size.x - dude.width) map.screen_coords.x +=delta;
  if (dude.coords.x < map.screen_coords.x + dude.width) map.screen_coords.x -=delta;
  $('screen_coords').update("x: "+map.screen_coords.x+"y: "+map.screen_coords.y)
  draw()

})
  </script>
 </head>
 <body onload="init();draw()">
   <canvas id="canvas" width="300" height="300"></canvas>
   <div id="debug">
     <div id="debug_input">None</div>
     <b>Screen Coords</b> <span id=screen_coords></span>
   </div>
 </body>
</html>

